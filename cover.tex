% !Mode:: "TeX:UTF-8" 

\newcommand{\chinesethesistitle}{基于软件演化的克隆代码分析与一致性维护方法研究} %授权书用，无需断行
\newcommand{\englishthesistitle}{\uppercase{RESEARCH ON ANALYSIS AND CONSISTENCY MAINTENANCE OF CODE CLONE BASED ON SOFTWARE EVOLUTION}} %\uppercase作用：将英文标题字母全部大写；
\newcommand{\chinesethesistime}{2017 年~10月}  %封面底部的日期中文形式
\newcommand{\englishthesistime}{October, 2017}    %封面底部的日期英文形式

\ctitle{基于软件演化的克隆代码分析与一致性维护方法研究}  %封面用论文标题，自己可手动断行
\cdegree{\cxueke\cxuewei}
\csubject{计算机应用技术}                 %(~按二级学科填写~)
\caffil{计算机科学与技术学院} %（在校生填所在系名称，同等学力人员填工作单位）
\cauthor{张凡龙}
\csupervisor{苏小红~教授} %导师名字
%\cassosupervisor{副导名}%若没有，请屏蔽掉此句。
%\ccosupervisor{联导名}%若没有，请屏蔽掉此句。


\cdate{\chinesethesistime}

\etitle{\englishthesistitle}
\edegree{\exuewei \ of \exueke}
\esubject{\emultiline[t]{Computer Applied Technology}}  %英文二级学科名
\eaffil{School of Computer Science and Technology}
\eauthor{Zhang Fanlong}                   %作者姓名 （英文）
\esupervisor{Prof. Su Xiaohong}       % 导师姓名 （英文）
%\eassosupervisor{Prof. Assosuper}%若没有，请屏蔽掉此句。
%\ecosupervisor{Prof. Cosuper}%若没有，请屏蔽掉此句。
\edate{\englishthesistime}

\natclassifiedindex{TP311.5}  %国内图书分类号
\internatclassifiedindex{004.41}  %国际图书分类号
\statesecrets{公开} %秘密

\iffalse
\BiAppendixChapter{摘~~~~要}{}
\fi
\cabstract{

在软件开发过程中，开发人员通过复制粘贴既有代码向系统中引入大量的克隆代码。克隆代码会随着时间和软件系统更新而进行演化，使软件系统变得越来越臃肿、难以维护，从而影响了软件的质量、可理解性和可维护性。这引发了对克隆代码的大量研究，例如克隆检测、克隆分析和克隆维护等。克隆检测帮助开发人员收集系统中的克隆代码，克隆分析帮助开发人员理解系统中存在的克隆代码，克隆维护帮助开发人员解决克隆代码已经引发或者可能引发的问题。克隆代码研究对帮助提高软件系统的质量、增强软件系统的可理解性和可维护性，具有重要理论意义和实际应用价值。

在克隆代码随着软件系统的演化过程中，克隆代码可能会被开发人员修改而发生变化，进一步地加剧了克隆代码的问题。演化中克隆代码的变化使得克隆代码难以理解，降低了软件的可理解性。由于克隆代码彼此之间的相似性，一个克隆代码的变化可能会导致其它克隆代码的变化，称为克隆代码的一致性变化。该一致性变化会导致系统额外的维护代价，而遗忘这种变化则会导致克隆代码一致性违背缺陷，降低了软件质量和可维护性。鉴于此，本文基于软件演化研究克隆代码分析与一致性维护方法，通过分析提取克隆代码的演化特征，帮助软件开发人员理解克隆代码及其演化过程，通过预测克隆代码的一致性维护需求帮助解决克隆代码的一致性维护问题，最后结合软件开发过程实现对克隆代码的同步开发与维护，可以提高软件质量、降低软件维护代价。

针对演化中的克隆代码难于理解和分析的问题，研究并提出了基于聚类的克隆代码演化特征分析方法，验证了克隆代码一致性需求预测的必要性。首先，使用克隆检测工具检测系统中的克隆代码，并构建克隆家系描述克隆代码的演化过程。然后，从克隆片段、克隆组和克隆家系三个不同维度提取相应的属性特征描述克隆代码及其演化过程。最后，聚类系统中的克隆代码并挖掘克隆代码演化特征。实验结果发现大部分的克隆代码在演化过程中是稳定的，但也存在相当数量发生变化的克隆代码，在发生变化的克隆代码中有超过一半的发生了一致性变化。

针对新创建的克隆代码在其演化中的一致性变化会导致额外的维护代价问题，研究并提出了克隆代码创建一致性维护需求预测方法，帮助开发人员从规避克隆代码产生的角度降低克隆代码的维护代价。将软件系统中最早出现的克隆代码称为克隆创建实例，并将其在未来演化过程中是否发生一致性变化称为克隆代码创建时一致性维护需求。首先，通过检测软件系统的克隆代码并构建其克隆家系，收集系统中新创建的克隆代码。然后，提取代码属性和上下文表示新创建的克隆代码。最后，使用机器学习方法训练预测模型，并预测克隆代码创建时的一致性维护需求。实验结果表明本文所提出的方法可以高效地预测克隆代码的一致性维护需求，可以帮助软件开发人员降低克隆代码的额外维护代价。

针对演化中克隆代码的一致性变化可能会导致克隆一致性违背缺陷的问题，研究并提出了克隆代码变化一致性维护需求预测方法，帮助开发人员实现克隆代码的同步开发与维护。将软件系统中发生变化的克隆代码称为克隆变化实例，并将该变化是否会引发克隆代码的一致性维护称为克隆代码变化时的一致性维护需求。首先，通过检测系统的克隆代码并构建系统克隆家系收集系统中的克隆变化实例。然后，从克隆组的角度提取三组不同的属性特征用于表示克隆变化实例，即代码属性、上下文属性和演化属性。最后，使用机器学习模型训练预测模型，并预测克隆代码变化时的一致性维护需求。实验结果表明本文所提出的方法可以有效地预测克隆代码的一致性维护需求，可以帮助软件开发人员避免克隆代码一致性违背缺陷。

针对在软件开发初期软件系统中因数据不足而无法预测克隆代码一致性维护需求的问题，研究并提出了跨项目克隆代码一致性维护需求预测方法。将克隆代码创建、变化实例统称为克隆实例，并将相应的一致性维护需求统一为克隆代码一致性维护需求。首先，对软件系统通过构建其克隆家系收集克隆实例，并使用不同的属性表示克隆实例。然后，将不同的软件系统划分为训练系统和测试系统，使用训练系统的数据训练机器学习模型，在测试系统上验证跨项目克隆一致性维护需求的预测效果。实验结果表明跨项目一致性维护需求预测模型可以在软件开发初期预测其它项目的克隆代码的一致性维护需求。最后，结合软件开发过程设计并实现了一个eclipse插件预测克隆代码一致性维护需求，可以边开发、边预测克隆代码的一致性维护需求， 有助于降低软件的维护代价。

综上所述，本文提出的基于软件演化的克隆代码分析与一致性维护方法，为在软件开发过程中解决分析和理解克隆代码、维护克隆代码的一致性、避免克隆代码相关缺陷、降低克隆代码维护代价、提高软件质量和可维护性等问题提供了一种新思路和新方法。
}

\ckeywords{软件质量；软件维护；克隆代码；克隆演化分析；克隆一致性维护}

\eabstract{
During the software development, developers introduce a large number of code clones into software through reusing the existing code fragments.
As code clones evolving with the time and the update of software, the software become more and more bloated and difficult to maintain, which can impact on the quality, comprehensibility, and maintainability of software. 
Hence, it sparks a great deal of research on code clones, such as clone detection, clone analysis, clone maintenance and etc. 
Clone detection can help developers gather the code clones from software, and clone analysis can help developers understand the presence of code clones in software, and clone maintenance can help developers solve the issues caused by code clones.
Consequently, code clone research has a great theoretical significance and practical applicative value for improving the quality of software, enhancing the comprehensibility, and maintainability of software.

During the process of code clone evolution, code clones may be modified by developers that resulting the changes to clones, which will exacerbate the issue of code clones. 
The changes to the evolving code clone make them difficult to understand, and decrease the comprehensibility of the software.
Meanwhile, changes to one code clone may give rise to some related changes to other code clones in a clone group according to the similarity of these code clones. 
We term such changes as clone consistent change to a clone group.
The consistent change of code clones will increase additional maintenance cost, and will lead to clone consistency-defect when failing in making the changes, which will reduce the quality and maintainability of the software. 
Therefore, this thesis studies on the analysis and consistency maintenance of code clone based on software evolution. 
Analyzing and exploring the clone evolutionary characteristics of code clones can help developers understand the code clones.
Predicting the consistent change of code clones can help developers solve the issues of code clone consistency maintenance.
Thus, this thesis can help developers improve software quality, and reduce the cost of software maintenance through synchronously maintain code clones at the development time.

Aiming to address the difficulty on analyzing and understanding the evolving code clones, an approach for exploring code clone evolutionary characteristics based on clustering method is proposed in this thesis, which lay the foundation on the prediction of clone consistency-requirement.
We firstly detect all code clones with detection tool from software's repositories, and build all the clone genealogies for software to describe the evolution of the code clones.
After that, the corresponding attribute sets are extracted from three different perspectives of the code clones and their evolution, including clone fragment, clone group and clone genealogy. 
Finally, the clustering method is employed for excavating and analyzing the clone evolutionary characteristics from all the code clones and their evolution. 
The experimental results show that most of the code clones are stable during evolution; yet, there are also a significant number of changed code clones, and more than a half of them possess the consistent change.

Aiming to address the problem of additional maintenance cost that caused by the clone consistent change in the evolution of a clone creating operation, we propose an approach for predicting clone creating consistency-requirement in this thesis, which can help developers avoid the extra maintenance cost of code clones from the perspective of clone prevention.
We call the earliest code clone in software as ``clone creating instance'', and call that of whether this creating instance will lead to consistent change in its evolution as ``clone creating consistency-requirement''.
Firstly, we collect all the clone creating instances through detecting all code clones and building all clone genealogies from software's repositories.
And then, we extract code attribute set to represent the copied code clone and context attribute set for the pasted code clone.
Finally, the machine-learning models are trained with these collection of clone creating instances, and are employed to predict clone creating consistency-requirement. 
The experimental results show that our approach can effectively predict the consistency-requirement for clone creating instances, which can help the developers to reduce the consistency maintenance cost of the code clone.

Aiming to address the problem of consistency-defect that caused by the clone consistent change in their evolution, an approach for predicting clone changing consistency-requirement is proposed in this thesis, which can help developers to synchronize the development and maintenance of code clones. 
We call the changed clone code as ``clone changing instance'', and call that of whether such changes will lead to a consistent change to this changed clone group as ``clone changing consistency-requirement''.
Firstly, through detecting all the code clones and building all the clone genealogies, all the clone changing instances can be collected from software's repositories.
After that, three different attribute sets from the perspective of clone group are extracted to represent the clone changing instance, including code attribute set, the context attribute set, and the evolutionary attribute set respectively.
Lastly, the machine-learning models are trained with the collection of clone changing instances, and are employed to predict clone changing consistency-requirement.
The experimental results show that the proposed approach can reasonably predict the consistency-requirement for changing instances, which can help the developers avoid clone consistency-defects.

Aiming to the problem that the insufficient clone instances is not enough to predict clone consistency-requirement at the early software development phase, an empirical study on clone cross-project consistency-requirement prediction is constructed in this thesis.
We unify the clone creating instances and changing instances as ``clone instances'', and unify the corresponding consistency-requirement as ``clone consistency-requirement''.
Firstly, for the software repositories, we collect their clone instances by detecting code clones and building clone genealogist from software repositories, and represent all clone instances with different attribute sets.
Then, the different softwares are divided into training softwares and testing softwares.
We employ the data from training softwares to train the machine-learning models, and verify the ability of clone cross-project consistency-requirement on the testing softwares.
The experimental results show that the cross-project prediction can be employed to predict clone consistency requirement at the early stage of software development.
Our approach can help to maintain code clones at the development phase that reducing the cost of software maintenance.
Combining with the software development, we develop and implement an eclipse plug-in for predicting clone consistency requirement, which can help maintain the code clone at the developing time that reducing the cost of software maintenance.

In summary, this thesis presents a method for code clone analysis and consistency maintenance based on software evolution, that providing new ideas and approaches for addressing the analysis and understand of code clone, the maintenance of code clone consistency, the avoidance of code clone consistency-defects, the reduction of code clone consistency maintenance costs, and the improvement of software quality and maintainability during at the software development phase.
}

\ekeywords{Software quality; software maintenance; code clone;  clone evolution analysis; clone consistency maintenance}
\makecover
\clearpage 
