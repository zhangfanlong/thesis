% !Mode:: "TeX:UTF-8" 

\newcommand{\chinesethesistitle}{基于软件演化的克隆代码分析与一致性维护方法研究} %授权书用，无需断行
\newcommand{\englishthesistitle}{\uppercase{RESEARCH ON CODE CLONE ANALYSIS AND CONSISTENCY MAINTENANCE BASED ON SOFTWARE EVOLUTION}} %\uppercase作用：将英文标题字母全部大写；
\newcommand{\chinesethesistime}{2017 年~6月}  %封面底部的日期中文形式
\newcommand{\englishthesistime}{June, 2017}    %封面底部的日期英文形式

\ctitle{基于软件演化的克隆代码分析与一致性维护方法研究}  %封面用论文标题，自己可手动断行
\cdegree{\cxueke\cxuewei}
\csubject{计算机科学与技术}                 %(~按二级学科填写~)
\caffil{计算机科学与技术学院} %（在校生填所在系名称，同等学力人员填工作单位）
\cauthor{张凡龙}
\csupervisor{苏小红教授} %导师名字
%\cassosupervisor{副导名}%若没有，请屏蔽掉此句。
%\ccosupervisor{联导名}%若没有，请屏蔽掉此句。


\cdate{\chinesethesistime}

\etitle{\englishthesistitle}
\edegree{\exuewei \ of \exueke}
\esubject{\emultiline[t]{Computer Science and Technology}}  %英文二级学科名
\eaffil{School of Computer Science and Technology}
\eauthor{Zhang Fanlong}                   %作者姓名 （英文）
\esupervisor{Prof. Su Xiaohong}       % 导师姓名 （英文）
%\eassosupervisor{Prof. Assosuper}%若没有，请屏蔽掉此句。
%\ecosupervisor{Prof. Cosuper}%若没有，请屏蔽掉此句。
\edate{\englishthesistime}

\natclassifiedindex{TP311.5}  %国内图书分类号
\internatclassifiedindex{004.41}  %国际图书分类号
\statesecrets{公开} %秘密

\iffalse
\BiAppendixChapter{摘~~~~要}{}
\fi
\cabstract{

研究表明软件系统中存在大量的克隆代码，即彼此之间相似的代码片段。有研究人员将克隆代码视为一种“代码坏味”，认为其存在会影响软件的质量、可理解性和可维护性。所以，研究人员提出了多种不同的克隆代码检测方法高效且快速的检测系统中的克隆代码。然而，在克隆代码随着软件系统进行演化的过程中，克隆检测无法解决克隆代码以及其变化使得软件系统难以理解和维护的问题。因此，对克隆代码的分析和维护研究变得尤为重要。克隆分析可以帮助程序开发人员理解系统中存在的克隆代码，克隆维护则可以帮助解决克隆代码所引发的问题。因此，克隆代码分析和维护研究对于帮助提高软件系统的质量、增强软件系统的可理解性和可维护性，具有重要的科学理论意义和实际应用价值。

在克隆代码随系统演化的过程中，克隆代码及其演化情况往往会表现出一些特征，本文称之为克隆代码演化特征。其中，引发研究人员强烈关注的是克隆代码在演化过程中的一致性和不一致性变化问题。克隆的变化会导致与之相关的克隆一致性缺陷和额外的维护代价，从而降低软件质量和可维护性。因此，本文在克隆代码演化的基础上结合机器学习方法研究克隆代码分析和一致性维护方法，通过提取分析克隆代码的演化特征，帮助软件开发人员理解克隆代码及其演化过程，并通过预测克隆代码的一致性维护需求解决克隆代码的一致性问题，从而帮助开发人员理解和维护软件中的克隆代码。

针对演化中的克隆代码难于理解和分析的问题，研究并提出了基于聚类的克隆代码演化特征分析方法，提取克隆演化特征帮助软件开发人员分析和理解克隆代码。首先，使用克隆检测工具检测系统中的克隆代码，并构建系统所有克隆代码的克隆家系用于描述克隆代码的演化过程。然后，从三个不同维度提取相应的度量值描述克隆代码及其演化过程，即克隆片段、克隆组和克隆家系。最后，使用聚类分析方法聚类克隆代码并挖掘克隆代码演化特征，帮助开发人员理解克隆代码及其演化过程。研究结果发现大部分的克隆代码在演化过程中是稳定的，但也存在相当数量的克隆代码发生变化，其中发生一致性变化的克隆代码比发生不一致性变化的克隆代码数量多一些。

针对新创建的克隆代码在其演化中的一致性变化往往会导致额外的维护代价问题，研究并提出了克隆代码创建时一致性维护需求预测方法。将由系统中最早出现的克隆代码称为克隆创建实例，并将其在未来演化过程中所发生的一致性变化称为克隆代码创建时一致性维护需求。首先，通过检测软件系统的克隆代码并构建其克隆家系收集系统中的克隆创建实例。然后，提取两组不同的度量值表示克隆创建实例，即代码属性和上下文属性。最后，使用机器学习方法训练预测模型，并在克隆代码创建时预测克隆代码的一致性维护需求。实验结果表明本文所提出的方法可以高效地预测克隆代码的一致性维护需求，可以帮助软件开发人员降低克隆代码的一致性维护代价。

针对演化中的克隆代码的一致性变化可能会导致克隆一致性缺陷问题，研究并提出了克隆代码变化时一致性维护需求预测方法。本文将软件系统中发生变化的克隆代码称为克隆变化实例，并将其未来演化过程中发生的一致性变化称为克隆代码变化时一致性维护需求。首先，通过检测系统的克隆代码并构建系统克隆家系收集系统中的克隆变化实例。然后，提取三组不同的度量值用于表示克隆变化实例，即代码属性、上下文属性和演化属性。最后，使用机器学习模型训练预测模型，并在克隆代码发生变化时预测克隆代码变化的一致性维护需求。实验结果表明本文所提出的方法可以有效地预测克隆代码的一致性维护需求，可以帮助软件开发人员避免克隆代码一致性缺陷。

针对在软件开发初期软件系统中因数据不足而无法预测克隆一致性的问题，研究并提出了跨项目克隆代码一致性维护需求预测实证研究方法。将克隆代码创建、变化实例统称为克隆实例，并将相应的一致性维护需求统一为克隆代码一致性维护需求。首先，对不同的软件系统，通过构建克隆家系收集克隆实例，并使用不同的属性表示克隆实例。然后，将不同的软件系统划分为训练系统和测试系统，并使用训练系统数据训练机器学习模型，并在测试系统上验证跨项目克隆一致性预测的效果。最后，结合软件开发过程，开发并实现了一个eclipse插件预测克隆代码的一致性维护需求，可以边开发、边预测克隆代码的一致性维护需求。 实验结果表明跨项目的一致性预测可以在软件开发初期帮助预测克隆一致性维护需求。%将本文方法嵌入到软件开发环境中，可以实现边开发、边分析、边维护克隆代码，帮助提高软件的质量和可维护性。使得克隆一致性需求预测与软件开发过程相结合，帮助程序开发人员避免克隆代码一致性缺陷和降低克隆维护代价。

综上所述，本文提出的基于软件演化的克隆代码分析与一致性维护方法，为解决克隆代码分析和理解、克隆代码一致性维护、避免克隆代码的相关缺陷、降低克隆代码的维护代价、提高软件质量和可维护性等问题提供了一种新思路和新方法。
}

\ckeywords{
克隆代码；克隆分析与维护；一致性变化；克隆演化特征；一致性维护需求预测
}

\eabstract{
Studies have shown that there are a large number of code clones in softwares, that code fragments are similar to each other. 
The viewpoint regards code clones as a famous ``bad smell", that believing presence of code clones will affect the quality, comprehensibility, and maintainability of the software. 
Researchers have proposed a variety of different clone detection methods, that can efficiently and quickly detect code clones from software repository. 
However, when the code clones evolving as the software's evolution, clone detection can not solve the the difficulty to understand and maintain the software that caused by code clones and its changes. 
Therefore, research on clone analysis and maintenance have become particularly important. Clone analysis can help developers understand code clones' presence in the software, that can improve the comprehensibility of the software; Clone maintenance can help developers solve the problems caused by code clones, that can improve the quality of software and maintainability.
Thus, research on code clone analysis and maintenance has great scientific theoretical significance and practical applicative value for improving the quality of the software and enhancing the comprehensibility and maintainability of the software.

During the process of code clone evolution, code clones and their evolution often conceal some clone characteristics, that we called as ``clone evolutionary characteristics''. 
Among them, researchers are strongly attracted by the changes to code clones -- ``consistent changes and inconsistent changes''. 
Clone changes will give rise to clone consistency-defects and additional maintenance costs associating these changes, that thereby reducing software quality and maintainability. Therefore, this thesis studies on the code clone analysis and consistency maintenance based on machine learning methods and software's evolution. 
Analyzing and extracting the clone evolutionary characteristics of code clones can help the developers understand the code clones.
Predicting the consistency-requirement of code clones can solve the issues of code clone consistency maintenance, that also can help developers to maintain code clones.

Aiming to address the difficulty of analyzing and understanding the evolving code clones, an  approach for extracting code clone evolutionary characteristics based on clustering method is proposed in this thesis, which can help the developers to analyze and understand the code clones.
We firstly detect all code clones with detection tool from software's repository, then build all the clone genealogies for software to describe the evolution of the code clones.
After that, the corresponding attribute sets were extracted from three different perspectives of the code clones and their evolution, including clone fragment, clone group and clone genealogy. 
Finally, the clustering method is employed for excavating and analyzing the clone evolutionary characteristics from all the code clones and their evolution to help developers understand the code clones. 
The experimental results show that most of the code clones are stable during evolution, but there are also a significant number of code clones that occur changes. 
What's more, the number of clone codes that having consistent change more than the code clones that having inconsistent change.

Aiming to address the problem of additional maintenance cost caused by the clone consistent change in future evolution of a clone creating operation, an approach for predicting clone creating consistency-requirement in this thesis.
We call the clone creation as ``clone creating instance'', and call the consistent change that occurs in the future evolution of such creating instance as ``clone creating consistency-requirement''.
Firstly, we collect all the clone creating instances through detecting all the code clones and building all clone genealogies from software's repository.
And then, two different attribute sets are extracted to represent the clone creating instance from two perspectives with code attribute set and context attribute set.
Finally, the machine learning model are trained with the collection of clone creating instances, and employed to predict clone creating consistency-requirement for clone creating instances. 
The experimental results show that our approach can effectively predict the consistency-requirement for creating instances, that can help the developers to reduce the consistency maintenance cost of the code clone at clone creating time.

Aiming to address the problem of consistency-defect caused by the clone consistent change in future evolution of a clone changing operation,  an approach for predicting clone changing consistency-requirement is proposed. 
In this thesis, we call the changing operation to clone code as ``clone changing instance'', and call the consistent change that occurs in the future evolution of such changing instance as ``clone changing consistency- requirement''.
First, through detecting all the code clones and building all the clone genealogies, all the clone changing instances can be collected  from software's repository.
After that, three different attribute sets are extracted to represent the clone changing instance with three perspectives of the code attribute set, the context attribute set, and the evolutionary attribute set.
Lastly, the machine learning model is trained with clone changing instances, and  is supplied to predict clone changing consistency-requirement.
The experimental results show that the proposed method can reasonable predict the consistency-requirement for changing instances, that can help the developers avoid clone consistency-defects at clone changing time.

Aiming to the problem that the insufficient clone instances is not enough to predict clone consistency-requirement at the early software development phase, an empirical study on clone consistency-requirement prediction for cross-project is constructed in this thesis.
We unify the clone creating-instances and changing-instances as ``clone instances'', and unify the corresponding consistency-requirement as ``clone consistency-requirement''.
Firstly, for the different software repositories, we collect their clone instances by detecting code clones and building clone genealogist from software repository, and represent all instance with different attribute sets.
Then, these different softwares are divided into training softwares and testing softwares, and employed the data from training softwares to train the machine learning models, and verified the ability of cross-project clone consistency-requirement on the testing softwares.
Finally, combining with the software development, we developed and implemented an eclipse plug-in for predicting clone consistency requirement. 
The experimental results show that the cross-project prediction can be employed to predict clone consistency requirement at the early stage of software development.
%However, we recommend that the developers should predict clone consistency-requirement using software's own data after several evolving versions that collecting the adequate clone instances.

In summary, this thesis presents the code clone analysis and consistency maintenance approach based on software evolution, that providing new ideas and methods for addressing the analysis and understand of code clone, the maintenance of code clone consistency, the avoidance of code clone consistency-defects, the reduction of code clone consistency maintenance costs, and the improvement of software quality and maintainability.
}

\ekeywords{
Code clones; clone analysis and maintenance; consistent change; clone evolutionary characteristics; clone consistency requirements
%keyword 1, keyword 2, keyword 3, ……, keyword 6 (no punctuation at the end) 英文摘要与中文摘要的内容应一致，在语法、用词上应准确无误。
}

\makecover
\clearpage 
